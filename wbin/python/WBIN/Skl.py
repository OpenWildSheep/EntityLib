# automatically generated by the FlatBuffers compiler, do not modify

# namespace: WBIN

import flatbuffers
from flatbuffers.compat import import_numpy
np = import_numpy()

class Skl(object):
    __slots__ = ['_tab']

    @classmethod
    def GetRootAsSkl(cls, buf, offset):
        n = flatbuffers.encode.Get(flatbuffers.packer.uoffset, buf, offset)
        x = Skl()
        x.Init(buf, n + offset)
        return x

    # Skl
    def Init(self, buf, pos):
        self._tab = flatbuffers.table.Table(buf, pos)

    # Skl
    def Skeleton(self, j):
        o = flatbuffers.number_types.UOffsetTFlags.py_type(self._tab.Offset(4))
        if o != 0:
            x = self._tab.Vector(o)
            x += flatbuffers.number_types.UOffsetTFlags.py_type(j) * 4
            x = self._tab.Indirect(x)
            from WBIN.BoneData import BoneData
            obj = BoneData()
            obj.Init(self._tab.Bytes, x)
            return obj
        return None

    # Skl
    def SkeletonLength(self):
        o = flatbuffers.number_types.UOffsetTFlags.py_type(self._tab.Offset(4))
        if o != 0:
            return self._tab.VectorLen(o)
        return 0

    # Skl
    def SkeletonIsNone(self):
        o = flatbuffers.number_types.UOffsetTFlags.py_type(self._tab.Offset(4))
        return o == 0

    # Skl
    def SourceFileInf(self):
        o = flatbuffers.number_types.UOffsetTFlags.py_type(self._tab.Offset(6))
        if o != 0:
            x = self._tab.Indirect(o + self._tab.Pos)
            from WBIN.SourceFileInf import SourceFileInf
            obj = SourceFileInf()
            obj.Init(self._tab.Bytes, x)
            return obj
        return None

def SklStart(builder): builder.StartObject(2)
def SklAddSkeleton(builder, skeleton): builder.PrependUOffsetTRelativeSlot(0, flatbuffers.number_types.UOffsetTFlags.py_type(skeleton), 0)
def SklStartSkeletonVector(builder, numElems): return builder.StartVector(4, numElems, 4)
def SklAddSourceFileInf(builder, sourceFileInf): builder.PrependUOffsetTRelativeSlot(1, flatbuffers.number_types.UOffsetTFlags.py_type(sourceFileInf), 0)
def SklEnd(builder): return builder.EndObject()

import WBIN.BoneData
import WBIN.SourceFileInf
try:
    from typing import List, Optional
except:
    pass

class SklT(object):

    # SklT
    def __init__(self):
        self.skeleton = None  # type: List[WBIN.BoneData.BoneDataT]
        self.sourceFileInf = None  # type: Optional[WBIN.SourceFileInf.SourceFileInfT]

    @classmethod
    def InitFromBuf(cls, buf, pos):
        skl = Skl()
        skl.Init(buf, pos)
        return cls.InitFromObj(skl)

    @classmethod
    def InitFromObj(cls, skl):
        x = SklT()
        x._UnPack(skl)
        return x

    # SklT
    def _UnPack(self, skl):
        if skl is None:
            return
        if not skl.SkeletonIsNone():
            self.skeleton = []
            for i in range(skl.SkeletonLength()):
                if skl.Skeleton(i) is None:
                    self.skeleton.append(None)
                else:
                    boneData_ = WBIN.BoneData.BoneDataT.InitFromObj(skl.Skeleton(i))
                    self.skeleton.append(boneData_)
        if skl.SourceFileInf() is not None:
            self.sourceFileInf = WBIN.SourceFileInf.SourceFileInfT.InitFromObj(skl.SourceFileInf())

    # SklT
    def Pack(self, builder):
        if self.skeleton is not None:
            skeletonlist = []
            for i in range(len(self.skeleton)):
                skeletonlist.append(self.skeleton[i].Pack(builder))
            SklStartSkeletonVector(builder, len(self.skeleton))
            for i in reversed(range(len(self.skeleton))):
                builder.PrependUOffsetTRelative(skeletonlist[i])
            skeleton = builder.EndVector(len(self.skeleton))
        if self.sourceFileInf is not None:
            sourceFileInf = self.sourceFileInf.Pack(builder)
        SklStart(builder)
        if self.skeleton is not None:
            SklAddSkeleton(builder, skeleton)
        if self.sourceFileInf is not None:
            SklAddSourceFileInf(builder, sourceFileInf)
        skl = SklEnd(builder)
        return skl
